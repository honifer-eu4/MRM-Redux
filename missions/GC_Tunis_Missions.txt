gc_tunis_1 = {
	slot = 1
	generic = no
	ai = yes
	potential_on_load = {
		has_dlc = "Golden Century"
	}
	potential = {
		has_dlc = "Golden Century"
		tag = TUN
		NOT = { map_setup = map_setup_random }
	}
	has_country_shield = yes
	gc_tun_tribes = {
		icon = mission_pacify_the_berbers
		required_missions = { }
		
		provinces_to_highlight = {
			OR = {
				province_id = 4567
				province_id = 2449
				province_id = 2448
				area = north_saharan_area
				area = ouled_nail_area
				area = tripolitania_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = {
			custom_trigger_tooltip = {
				tooltip = tun_tribes_tooltip
				fezzan_area = {
					type = all
					OR = {
						country_or_non_sovereign_subject_holds = ROOT
						is_empty = yes
					}
				}
			}
			north_saharan_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			ouled_nail_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			tripolitania_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		effect = {
			add_country_modifier = {
				name = "tun_berbers_pacified"
				duration = 7300
			}
		}
	}
	gc_tun_sahara = {
		icon = mission_traverse_the_sahara
		required_missions = { gc_tun_tribes }
		
		provinces_to_highlight = {
			OR = {
				AND = {
					province_id = 341
					NOT = { is_strongest_trade_power = ROOT }
				}
				AND = {
					province_id = 354
					OR = {
						NOT = {	owned_by = ROOT }
						has_trade_building_trigger = no
					}
				}
				AND = {
					province_id = 2448
					NOT = {
						owned_by = ROOT
						is_core = ROOT
					}
				}
			}
		}
		
		trigger = {
			354 = {
				has_trade_building_trigger = yes
				owned_by = ROOT
			}
			owns_core_province = 2448
			341 = {
				is_strongest_trade_power = ROOT
			}
		}
		effect = {
			if = {
				limit = {
					2474 = {
						is_empty = yes
					}
				}
				2474 = {
					add_core = ROOT
					cede_province = ROOT
				}
			}
			if = {
				limit = {
					2475 = {
						is_empty = yes
					}
				}
				2475 = {
					add_core = ROOT
					cede_province = ROOT
				}
			}
			azbin_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				discover_country = ROOT	
				add_permanent_claim = ROOT
			}
			east_azbin_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				discover_country = ROOT
				add_permanent_claim = ROOT				
			}
			katsina_area = {
				discover_country = ROOT
			}
		}
	}
	gc_tun_air = {
		icon = mission_conquer_air
		required_missions = { gc_tun_sahara }
		
		provinces_to_highlight = {
			OR = {
				area = azbin_area
				area = east_azbin_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
			has_discovered = ROOT
		}
		
		trigger = {
			azbin_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			east_azbin_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		effect = {
			add_country_modifier = {
				name = "conquest_of_air"
				duration = 7300
			}
			guinea_region = {
				discover_country = ROOT
			}
			niger_region = {
				discover_country = ROOT
			}
			sahel_region = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				discover_country = ROOT
				add_permanent_claim = ROOT
			}
		}
	}
	gc_tun_develop_the_interior = {
		icon = mission_conquer_kanem_bornu
		required_missions = { gc_tun_air }
		
		provinces_to_highlight = {
			OR = {
				area = east_azbin_area
				area = azbin_area
			}
			OR = {
				NOT = { owned_by = ROOT }
				NOT = { is_core = ROOT }
				has_manpower_building_trigger = no				
				has_forcelimit_building_trigger = no
			}
		}
		
		trigger = {
			azbin_area = {
				type = all
				is_core = ROOT
				has_manpower_building_trigger = yes				
				has_forcelimit_building_trigger = yes
			}
			east_azbin_area = {
				type = all
				is_core = ROOT
				has_manpower_building_trigger = yes				
				has_forcelimit_building_trigger = yes
			}
		}
		effect = {
			azbin_area = {
				add_base_manpower = 2
			}
			east_azbin_area = {
				add_base_manpower = 2
			}
		}
	}
}

gc_tunis_2 = {
	slot = 2
	generic = no
	ai = yes
	potential_on_load = {
		has_dlc = "Golden Century"
	}
	potential = {
		has_dlc = "Golden Century"
		tag = TUN
		NOT = { map_setup = map_setup_random }
	}
	has_country_shield = yes

	gc_tun_emirate_of_sicily = {
		icon = mission_seize_the_isles
		
		provinces_to_highlight = {
			OR = {
				area = western_sicily_area
				area = sicily_area
				area = naples_area
				area = calabria_area
				area = apulia_area
				area = corsica_sardinia_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = {
			num_of_owned_provinces_with = {
				value = 19 #out of 20
				OR = {
					area = western_sicily_area
					area = sicily_area
					area = naples_area
					area = calabria_area
					area = apulia_area
					area = corsica_sardinia_area
				}
			}
		}
		effect = {
			italy_region = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			set_country_flag = emirate_of_sicily_tun
			add_government_reform = sicilian_emirate_restored
			override_country_name = TUN_Empire

		}
	}

	gc_tun_conquest_of_italy = {
		icon = complete_the_risorgimento
		required_missions = { gc_tun_emirate_of_sicily }

		provinces_to_highlight = {
			region = italy_region
			OR = {
				NOT = { owned_by = ROOT }
				NOT = { is_core = ROOT }
			}
		}
		trigger = {
			italy_region = {
				type = all
				owned_by = ROOT
				is_core = ROOT
			}
		}
		effect = {
			override_country_name = TUN_Empire_2
		}
	}
	
	gc_tun_conquest_of_southern_italy = {
		icon = mission_raid_on_genoa
		required_missions = { gc_tun_med_islands }
		position = 3
		
		provinces_to_highlight = {
			OR = {
				area = apulia_area
				area = naples_area
				area = calabria_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = {
			calabria_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			naples_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			apulia_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		effect = {
			lazio_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			central_italy_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			tuscany_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
		}
	}	
	gc_tun_conquest_of_central_italy = {
		icon = mission_raid_on_valencia
		required_missions = { gc_tun_conquest_of_southern_italy }
		
		provinces_to_highlight = {
			OR = {
				area = lazio_area
				area = central_italy_area
				area = tuscany_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }		}
		
		trigger = {
			lazio_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			central_italy_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			tuscany_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		effect = {
			italy_region = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			set_country_flag = tunis_italian_nobility
			add_government_reform = integrate_italian_nobility
		}
	}
}

gc_tunis_3 = {
	slot = 3
	generic = no
	ai = yes
	potential_on_load = {
		has_dlc = "Golden Century"
	}
	potential = {
		has_dlc = "Golden Century"
		tag = TUN
		NOT = { map_setup = map_setup_random }
	}
	has_country_shield = yes
	
	gc_tun_fleet = {
		icon = mission_construct_a_corsair_fleet
		required_missions = { }
		
		trigger = {
			navy_size_percentage = 0.5
		}
		effect = {
			sicily_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			western_sicily_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			corsica_sardinia_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			baleares_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			barbary_coast_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			algiers_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			hautes_plaines_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			ouled_nail_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			north_saharan_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			fezzan_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
		}
	}
	gc_tun_med_islands = {
		icon = mission_seize_the_isles
		required_missions = { gc_tun_fleet }
		
		provinces_to_highlight = {
			OR = {
				area = sicily_area
				area = western_sicily_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = {
			sicily_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			western_sicily_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		effect = {
			add_country_modifier = {
				name = "tun_med_conquest"
				duration = 7300
			}
			add_treasury = 300
			add_adm_power = 400
			calabria_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			apulia_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			naples_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
		}
	}
	gc_tun_conversion_of_sicily = {
		icon = mission_dominate_the_mediterranean
		required_missions = { gc_tun_med_islands }
		
		provinces_to_highlight = {
			OR = {
				area = sicily_area
				area = western_sicily_area
			}
		}
		
		trigger = {
			western_sicily_area = {
				type = all
				is_core = ROOT
				NOT = {
					nationalism > 10
				}
			}
			sicily_area = {
				type = all
				is_core = ROOT
				NOT = {
					nationalism > 10
				}
			}
		}
		effect = {
			add_accepted_culture_or_dip_power = {
				culture = sicilian
			}
			if = {
				limit = {
					ROOT = {
						religion = sunni
					}
				}
				sicily_area = {
					change_religion = sunni
				}
				western_sicily_area = {
					change_religion = sunni
				}
			}
			else = {
				sicily_area = {
					change_religion = ibadi
				}
				western_sicily_area = {
					change_religion = ibadi
				}
			}

		}
	}
	gc_tun_sack_of_rome = {
		icon = mission_raid_on_venice
		required_missions = { gc_tun_conversion_of_sicily }
		
		provinces_to_highlight = {
			province_id = 118
		}
		
		trigger = {
			118 = {
				owned_by = ROOT
			}
		}
		effect = {
			add_treasury = 1000
			118 = {
				add_devastation = 50
			}
			add_power_projection = { 
				type = 25_permanent_power_projection
				amount = 25 
			}
			custom_tooltip = chi_permanent_pp
			add_prestige_or_monarch_power = {
				amount = 40
			}
			add_legitimacy_or_mil_power = {
				amount = 10
			}			
		}
	}
}

gc_tunis_4 = {
	slot = 4
	generic = no
	ai = yes
	potential_on_load = {
		has_dlc = "Golden Century"
	}
	potential = {
		has_dlc = "Golden Century"
		tag = TUN
		NOT = { map_setup = map_setup_random }
	}
	has_country_shield = yes
	gc_tun_ibadi = {
		icon = mission_the_caliph

		trigger = {
			stability = 1
		}
		effect = {
			country_event = {
				id = redux_tun.1
			}
			custom_tooltip = tunis_ibadi_event_tt
		}
	}
		
	gc_tun_ottomans = {
		icon = mission_ottoman_diplomacy
		required_missions = { gc_tun_fleet }
		position = 2
		
		provinces_to_highlight = {
			owned_by = TUR
			is_capital = yes
		}
		
		trigger = {	
			OR = {
				alliance_with = TUR
				is_rival = TUR
				NOT = { exists = TUR }
			}
		}
		effect = {
			delta_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			cyrenaica_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
		}
	}
	gc_tun_alexandria = {
		icon = mission_conquer_alexandria
		required_missions = { gc_tun_ottomans }
		position = 3
		
		provinces_to_highlight = {
			OR = {
				area = cyrenaica_area
				area = delta_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = {
			delta_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			cyrenaica_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		effect = {
			egypt_region = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			if = {
				limit = {
					has_dlc = "Dharma"
					358 = {
						NOT = {
							province_has_center_of_trade_of_level = 3
						}
					}
				}
				358 = {
					add_center_of_trade_level = 1
				}
			}
			else = {
				358 = {
					add_province_modifier = {
						name = "tun_restoration_of_alexandra"
						duration = -1
					}
				}
			}
		}
	}
	gc_tun_integrate_mamluks = {
		icon = mission_conquer_alexandria
		required_missions = { gc_tun_alexandria }
		position = 3
		
		provinces_to_highlight = {
			culture = al_misr_arabic
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = {
			ROOT = {
				num_of_provinces_owned_or_owned_by_subjects_with = {
					value = 15
					culture = al_misr_arabic 
				}
			}
		}
		effect = {
			custom_tooltip = unlock_privilege_estate_nobles_enlist_the_mamluks_tt
			set_country_flag = enable_mamluk_privilege
			unlock_estate_privilege = {
				name = estate_nobles_enlist_the_mamluks
			}
		}
	}
}

gc_tunis_5 = {
	slot = 5
	generic = no
	ai = yes
	potential_on_load = {
		has_dlc = "Golden Century"
	}
	potential = {
		has_dlc = "Golden Century"
		tag = TUN
		NOT = { map_setup = map_setup_random }
	}
	has_country_shield = yes

	gc_tun_desert_development = {
		icon = mission_traverse_the_sahara
		position = 1 
		provinces_to_highlight = {
			owned_by = ROOT
			OR = {
				has_terrain = desert 
				has_terrain = coastal_desert
			}
			has_tax_building_trigger = no
		}
		trigger = {
			num_of_owned_provinces_with = {
				value = 5
				is_core = ROOT 
				OR = {
					has_terrain = desert
					has_terrain = coastal_desert
				}
				has_tax_building_trigger = yes
			}
		}
		effect = {
			custom_tooltip = tun_desert_development_tooltip
			set_country_flag = has_estate_clergy_exploration_expedition
		}
	}
	gc_tun_art_religion = {
		icon = mission_patronize_art_and_religion
		position = 2
		
		provinces_to_highlight = {
			province_id = 4566
			OR = {
				NOT = { owned_by = ROOT }
				has_tax_building_trigger = no
				NOT = { has_building = university }
			}
		}
		
		trigger = {
			4566 = {
				owned_by = ROOT
				development = 20
				has_tax_building_trigger = yes
			}
			OR = {
				mil = 6
				adm = 6
				dip = 6
			}
			num_accepted_cultures = 5
		}
		effect = {
			add_country_modifier = {
				name = redux_tunis_art_and_religion
				duration = 5475
			}
			4566 = {
				add_great_project_tier = {
					type = holy_city_kairouan 
					tier = 1 
				}
			}
		}
	}

	gc_tun_barbary_coast = {
		icon = mission_control_the_barbary_coast
		required_missions = { gc_tun_ottomans }
		position = 3
		
		provinces_to_highlight = {
			OR = {
				area = barbary_coast_area
				area = algiers_area
				area = hautes_plaines_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = {
			barbary_coast_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			algiers_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			hautes_plaines_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		effect = {
			add_yearly_sailors = 3
			add_country_modifier = {
				name = "tun_barbary_pirates"
				duration = 7300
			}
		}
	}
	gc_tun_privateer = {
		icon = mission_sponsor_piracy
		required_missions = { gc_tun_barbary_coast  }
		position = 4
		
		provinces_to_highlight = {	
			OR = {
				province_id = 1298
				AND = {
					province_id = 338
					NOT = {
						owned_by = ROOT
					}
					has_shipyard_building_trigger = no
				}
			}
		}
		
		trigger = {
			num_of_owned_provinces_with = {
				value = 10
				OR = {
					has_building = shipyard
					has_building = grand_shipyard
				}
			}
			338 = { 
				owned_by = ROOT 
				OR = {
					has_building = shipyard
					has_building = grand_shipyard
				}
			}
		}
		effect = {
			# Barbarossa event, make Algiers a pirate march
			country_event = {
				id = flavor_tun.1
			}
			northern_morocco_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			western_morocco_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			marrekesh_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			tafilalt_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			sus_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			southern_morocco_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
		}
	}
	gc_tun_morocco = {
		icon = mission_moroccan_ports
		required_missions = { gc_tun_privateer }
		position = 5
		
		provinces_to_highlight = {
			OR = {
				area = northern_morocco_area
				area = western_morocco_area
				area = marrekesh_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = {
			northern_morocco_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			western_morocco_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			marrekesh_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		effect = {
			add_country_modifier = {
				name = "tun_morocco"
				duration = -1
			}
		}
	}
}
